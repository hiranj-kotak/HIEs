import Head from "next/head";
import Carousel from 'react-bootstrap/Carousel';
import Card from 'react-bootstrap/Card';
import Col from 'react-bootstrap/Col';
import Row from 'react-bootstrap/Row';
import axios from "axios";
import { useState, useEffect } from "react";

export default function Home() {

    const [data, setData] = useState([]);

    // const data2 = [{ "_id": { "$oid": "63653c205f85be249ae58fbe" }, "instituteName": "birla institute of technology & science", "NAAC": "A", "CGPA": "3.45", "NIRF": [{ "name": "university", "rank": "18" }, { "name": "engineering", "rank": "29" }, { "name": "overall", "rank": "32" }, { "name": "pharmacy", "rank": "5" }, { "name": "research", "rank": "33" }] }]

    function getData() {
        const options = { method: 'GET', url: 'http://127.0.0.1:5000/topcolleges/', headers: { jwt: '' } };

        axios.request(options).then(function (response) {
            setData(response.data)
            console.log(response.data);
        }).catch(function (error) {
            console.error(error);
        });
    }

    useEffect(() => {
        getData();
    }, []);

    return (
        <div>
            <Head>
                <title>Create Next App</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className="container mt-3">
                <h1 className="text-center">
                    Top 10 institutes
                </h1>
                <Row xs={1} md={2} lg={3} className="g-4 my-3 container mx-auto">
                    {data.map((item) => (
                        <Col>
                            <Card style={{ width: "24rem", height: "18rem" }} className="mx-auto">
                                <Card.Body>
                                    <Card.Title>
                                        {item.instituteName.charAt(0).toUpperCase() + item.instituteName.slice(1)}
                                    </Card.Title>
                                    <Card.Text>
                                        <>
                                            <table className="p-5">
                                                <tbody>
                                                    <tr>
                                                        <td className="pr-2">
                                                            {" "}
                                                            NAAC Grade
                                                        </td>
                                                        <td className="px-2"> : </td>
                                                        <td className="px-2">
                                                            {item.NAAC}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td className="pr-2"> NAAC CGPA</td>
                                                        <td className="px-2"> : </td>
                                                        <td className="px-2">
                                                            {item.CGPA}
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <div className="mt-2">
                                                <h6 className="fw-bold mb-0">NIRF Rank</h6>
                                                {item.NIRF.map((e) => (
                                                    <div>
                                                        <span className="fw-bold">{e.name}</span>
                                                        <span className="px-2"> : </span>
                                                        <span>{e.rank}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </>
                                    </Card.Text>
                                </Card.Body>
                            </Card>
                        </Col>
                    ))}
                </Row>
            </div>
        </div>
    );
}
